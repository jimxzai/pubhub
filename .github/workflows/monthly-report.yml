name: æ¯æœˆè‡ªåŠ¨ç”Ÿæˆæœˆåº¦æŠ¥å‘Šè‰ç¨¿

on:
  schedule:
    # æ¯æœˆ1æ—¥æ—©ä¸Š8ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
    - cron: '0 0 1 * *'
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  generate-monthly-report:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: Generate monthly report
        run: |
          node scripts/monthly-report.js

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v5
        with:
          commit-message: 'ğŸ“– è‡ªåŠ¨ç”Ÿæˆæœˆåº¦æŠ¥å‘Šè‰ç¨¿'
          branch: monthly-report-${{ github.run_number }}
          title: 'ğŸ“– æœ¬æœˆä¸“ç« è‰ç¨¿ (è‡ªåŠ¨ç”Ÿæˆ)'
          body: |
            ## è‡ªåŠ¨ç”Ÿæˆçš„æœ¬æœˆä¸“ç« 

            æœ¬PRç”±GitHub Actionsè‡ªåŠ¨åˆ›å»ºã€‚

            **è¯·å®¡é˜…å¹¶å®Œå–„ä»¥ä¸‹å†…å®¹ï¼š**
            - [ ] å‰¯æ ‡é¢˜
            - [ ] æ‘˜è¦
            - [ ] åŸå…¸ç²¾è¯»éƒ¨åˆ†
            - [ ] AIæ—¶ä»£è§£è¯»éƒ¨åˆ†
            - [ ] ä¸‰ä¹¦åˆè®º
            - [ ] ä¸ªäººæˆé•¿

            å®Œæˆåè¯·å°†è‰ç¨¿ç§»åŠ¨åˆ° `monthly-reports/published/` ç›®å½•ã€‚

            **æç¤º**: å¯ä»¥ä½¿ç”¨ Claude Code å¸®åŠ©æ¶¦è‰²å’Œæ·±åº¦åˆ†æã€‚

          labels: |
            automated
            monthly-report
